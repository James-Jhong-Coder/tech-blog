---
import dayjs from "dayjs";
import PostTag from "./PostTag.astro";

interface Props {
  title?: string;
  description?: string;
  createDate?: Date | string | number;
  tags?: Array<string>;
  class?: string;
}

const {
  title = "",
  description = "",
  createDate,
  tags = [],
  class: className = "",
} = Astro.props as Props;

const formattedDate = dayjs(createDate).format("YYYY-MM-DD");
---

<div class={`post-item ${className}`}>
  <div class="post-title">{title}</div>
  {description && <div class="post-description">{description}</div>}
  <div class="post-meta">
    <span class="post-date">{formattedDate}</span>
    <div class="post-tags">
      {
        tags.map((item, index) => (
          <a class="inline-flex" href={`/tags/${item}`}>
            <PostTag title={item} class={index > 0 ? "ml-1.5" : ""} />
          </a>
        ))
      }
    </div>
  </div>
</div>

<style>
  @reference "../styles/global.css";

  .post-item {
    @apply py-5;
    border-bottom: 1px solid var(--color-border);
    transition: all 0.2s;
  }
  .post-item:hover {
    @apply pl-2;
  }
  .post-item:hover .post-title {
    color: var(--color-accent);
  }

  .post-title {
    @apply text-lg font-medium;
    color: var(--color-text-primary);
    transition: color 0.2s;
  }

  .post-description {
    @apply mt-1.5 text-sm;
    color: var(--color-text-secondary);
  }

  .post-meta {
    @apply mt-3 flex items-center gap-3;
  }

  .post-date {
    @apply text-xs;
    color: var(--color-text-muted);
  }

  .post-tags {
    @apply flex items-center flex-wrap;
  }
</style>
