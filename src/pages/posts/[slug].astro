---
import { getCollection, render } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Breadcrumb from "@/components/Breadcrumb.astro";
import Prose from "@/components/Prose.astro";
export async function getStaticPaths() {
    const posts = await getCollection("posts", ({ data }) => !data.draft);
    return posts.map((post) => ({
        params: { slug: post.id },
    }));
}

const { slug } = Astro.params;
const post = (await getCollection("posts")).find((p) => p.id === slug);

if (!post) {
    throw new Error(`Post not found: ${slug}`);
}
const { Content } = await render(post);
// const dateText = post.data.createDate
//     ? new Date(post.data.createDate).toISOString().slice(0, 10)
//     : "";
---

<Layout>
    <Breadcrumb
        class="mt-6 mb-10"
        items={[
            { label: "首頁", href: "/", iconName: "home" },
            { label: "文章列表", href: "/posts", iconName: "postList" },
            { label: post.id, href: "", iconName: "post" },
        ]}
    />
    <Prose>
        <Content />
    </Prose>
</Layout>

<style></style>
